<!DOCTYPE html>
<html>
<head>
    <title>My Map</title>
    <link rel="stylesheet" href="drugmap/leaflet/leaflet.css" />
    <script src="drugmap/leaflet/leaflet.js"></script>
    <style>
        #mapid { height: 100%; }
    </style>
</head>
<body>
    <div id="mapid"></div>

    <script>
        // Function to initialize the map and load the data
        function initMap() {
            var mymap = L.map('mapid').setView([23.6978, 120.9605], 8);

            // Adding the tile layer to the map
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: 'Map data Â© <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
            }).addTo(mymap);

            //Fetch the JSON data
            fetch('drugmap/JSON/drugstoreinfo.json')
                .then(response => response.json())
                .then(data => {
                    addDrugstoreMarkers(data, mymap);
                })
                .catch(error => {
                    console.error('Error loading the drugstore data: ', error)
                });
            }
        // Function to add markers to the map
        function addDrugstoreMarkers(data, map) {
            data.drugstores.forEach(drugstore => {
                L.marker([drugstore.latitude, drugstore.longitude]).addTo(map)
                    .bindPopup('<b>' + drugstore.name + '</b><br>' + drugstore.address);
            });
        }
        // Call the initMap function when the window loads
        window.onload = initMap;
    </script>
</body>
</html>